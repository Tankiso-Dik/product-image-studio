## Product Image Studio — Repository Rules

### Purpose
- **Encode goals**: modular HTML/CSS scene engine with JSON-driven content and Puppeteer export.
- **Enforce aesthetics**: premium, glassy, gradient scenes with floating browser frames.
- **Bound the stack**: HTML/CSS scenes, Node injectors, Express+Puppeteer server.
- **Guard edits**: small diffs, keep shared CSS, preserve API, deployment stays simple.
- **Checklist**: provide a PASS/FAIL gate for every change.

### What this project is
- **Engine**: Modular HTML + CSS for premium product images.
- **Content control**: Per‑scene JSON injected by Node (`buildSceneHtml`).
- **Export**: Puppeteer creates PNGs (local or server).
- **Builder UI**: Minimal page posts payloads to compose HTML and download PNGs.

### Non‑negotiable aesthetic (MUST)
- **Floating browser frames** only — no device mockups.
- **Glassmorphism**: soft blur, translucent layers, rounded corners, premium shadows.
- **Layered gradients** + **subtle noise overlay**; background sets the mood.
- **Large, low‑opacity orbs** near corners for depth.
- **Clean, compact Notion‑style blocks** inside frames.
- **No animations**, **no inline styles**, **no third‑party mockup assets**.

### Tech boundaries (MUST)
- **Scenes**: HTML/CSS only (no JS frameworks for scene markup).
- **Shared CSS**: lives in `assets/css/` (`base.css`, `theme.css`, `mockup.css`).
- **Dynamic content**: comes from JSON (not hardcoded in scene HTML).
- **Node scripts**:
  - `scripts/buildSceneHtml.js`: single source of truth for injection.
  - `scripts/loadScene.js`: CLI wrapper writing `.temp.html` to `output/`.
  - `scripts/render.js`, `scripts/batchRender.js`: Puppeteer screenshotting.
- **Server/API**:
  - `server.js` with Express.
  - `POST /api/compose` → returns composed HTML string.
  - `POST /api/screenshot` → returns PNG via Puppeteer.
  - **Screenshots**: accept remote URLs and data URLs.
- **Default export size**: 1600×900 (allow width/height overrides via payload/JSON when supported).

### File/Folder truths (DON’T drift)
- `scenes/`: pairs of `NN-name.html` + `NN-name.json`.
  - HTML uses `data-key` placeholders: `theme`, `addressBar`, `browserScreenshot`, `mainHeading`, `subHeading`, `sections`.
  - Include screenshot placeholder:
    ```html
    <img class="browser-screenshot" data-key="browserScreenshot" src="../assets/screenshots/placeholder.png" alt="Screenshot placeholder">
    ```
  - Include sections container:
    ```html
    <div class="dashboard-sections" data-key="sections"></div>
    ```
- `assets/css/`: shared styles only; do not duplicate CSS in scenes.
- `assets/screenshots/placeholder.png` must exist.
- Builder UI: `tools/scene-builder.html` + `assets/js/builder.js` + `assets/css/builder.css`.

### Editing guardrails
- **Small, surgical diffs**; ask before large refactors.
- **Do not move files** across folders without updating all references.
- **No new deps** unless required for rendering or security.
- **Accessibility**: alt text on images, ARIA for progress bars, sensible heading structure.
- **Commits**: imperative, scoped messages (e.g., `feat(scene): add hero variant`).

### Acceptance checklist (use this on every PR/change; output PASS/FAIL with reasons)
1. **Scene JSON control**: PASS/FAIL — dynamic content defined in JSON, not hardcoded in HTML.
2. **Placeholders**: PASS/FAIL — required `data-key` hooks present + sections container exists.
3. **Shared CSS**: PASS/FAIL — no inline styles; changes live in `assets/css/*`.
4. **Aesthetic**: PASS/FAIL — floating browser frame + glass + gradients + orbs preserved.
5. **Server/API**: PASS/FAIL — `/api/compose` and `/api/screenshot` conform to spec.
6. **Puppeteer**: PASS/FAIL — 1600×900 export works; batch export still works.
7. **Assets**: PASS/FAIL — `assets/screenshots/placeholder.png` exists; scene references valid.
8. **Deployment**: PASS/FAIL — `npm start` runs; Render config remains minimal.

### How you (Cursor) should operate
- **Before changes**: run this checklist against the current repo; propose a minimal plan.
- **After changes**: append a short PASS/FAIL report with reasons.
- **If risks** to non‑negotiable aesthetic or tech boundaries: STOP and ask.
